# web.d 服务升级

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
在我们版本运行之初，可以这么理解，已经将完好的版本发布，现在要对其进行
升级，但是又不要用户感知自己的服务器的升级行为，我们可参考 nginx 平滑升级

### nginx 平滑升级

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
当前服务器中正在运行 nginx 服务，现对 nginx 进行升级(且跨度不大，容易造成服务器崩溃)
且在服务不停止的情况下进行升级

#### 具体过程：

- 在不停掉旧进程的情况下，启动新进程
- 就进程负责处理仍然没有处理完的请求，但不接收新请求
- 新进程负责接受请求
- 老进程处理完所有请求，关闭所有连接后，服务终止
